{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-5 col-lg-4">
        <div class="news-card p-5 text-center position-relative shadow-lg border-0">
            
            {% if request.args.get('mode') == 'register' %}
                <!-- CADASTRO -->
                <div class="position-absolute top-0 end-0 m-3">
                    <i class="fas fa-cog text-secondary opacity-25" 
                       style="cursor: pointer;" 
                       onclick="document.getElementById('admin-field').style.display = (document.getElementById('admin-field').style.display === 'none' ? 'block' : 'none')"></i>
                </div>

                <!-- Logo do Frango -->
                <div class="mb-3">
                    <img src="{{ url_for('static', filename='logo.png') }}" width="80" class="rounded-circle shadow-sm mb-2">
                    <h4 class="fw-bold" style="color: var(--brand-color)">FrangoAlert</h4>
                </div>
                <h5 class="fw-bold mb-4 text-secondary">Junte-se ao bando</h5>
                
                <form action="{{ url_for('register') }}" method="POST" class="text-start">
                    <div class="mb-3">
                        <label class="form-label">Nome</label>
                        <input type="text" name="name" class="form-control" required>
                    </div>
                    
                    <div id="admin-field" class="mb-3 bg-warning bg-opacity-10 p-2 rounded border border-warning" style="display: none;">
                        <label class="form-label text-warning">Código do Galo Mestre</label>
                        <input type="text" name="admin_code" class="form-control form-control-sm">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-control" required>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">Senha</label>
                        <input type="password" name="password" class="form-control" required>
                    </div>
                    <button class="btn btn-msn w-100 py-2">Criar Conta</button>
                </form>
                <p class="mt-3 small text-muted">Já é do bando? <a href="{{ url_for('login') }}" style="color: var(--brand-color)">Entrar</a></p>

            {% else %}
                <!-- LOGIN -->
                <div class="mb-3">
                    <img src="{{ url_for('static', filename='logo.png') }}" width="80" class="rounded-circle shadow-sm mb-2">
                    <h4 class="fw-bold" style="color: var(--brand-color)">FrangoAlert</h4>
                </div>
                <h5 class="fw-bold mb-4 text-secondary">Bem-vindo de volta!</h5>
                
                <form action="{{ url_for('login') }}" method="POST" class="text-start">
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-control" required>
                    </div>
                    <div class="mb-4">
                        <label class="form-label">Senha</label>
                        <input type="password" name="password" class="form-control" required>
                    </div>
                    <button class="btn btn-msn w-100 py-2">Entrar</button>
                </form>
                <p class="mt-3 small text-muted">Ainda não tem conta? <a href="{{ url_for('register') }}" style="color: var(--brand-color)">Criar conta</a></p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}